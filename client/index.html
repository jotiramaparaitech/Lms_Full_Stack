<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- <link rel="icon" type="image/svg+xml" href="/ALogo.png" /> -->
    <link rel="icon" type="image/png" sizes="7x7" href="/ALogo.png" />
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="/ALogo-32.png" /> -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Permissions Policy to reduce warnings (optional, but helps) -->
    <meta http-equiv="Permissions-Policy" content="accelerometer=(), gyroscope=(), magnetometer=(), payment=*" />
    <title>Aparaitech</title>

    <!-- ✅ Suppress specific harmless Razorpay console errors -->
    <script>
      (function () {
        const shouldSuppress = function (msg) {
          if (!msg) return false;
          const msgStr = String(msg).toLowerCase();

          // Only suppress these specific errors:
          // 1. "Refused to get unsafe header "x-rtb-fingerprint-id""
          if (msgStr.includes("refused to get unsafe header") && msgStr.includes("x-rtb-fingerprint-id")) {
            return true;
          }

          // 2. "Error: <svg> attribute width: Expected length, "auto"."
          if (msgStr.includes("svg") && msgStr.includes("attribute") && msgStr.includes("width") && msgStr.includes("expected length") && msgStr.includes("auto")) {
            return true;
          }

          // 3. "Error: <svg> attribute height: Expected length, "auto"."
          if (msgStr.includes("svg") && msgStr.includes("attribute") && msgStr.includes("height") && msgStr.includes("expected length") && msgStr.includes("auto")) {
            return true;
          }

          // 4. Mixed Content warnings (harmless, auto-upgraded)
          if (msgStr.includes("mixed content") && msgStr.includes("automatically upgraded")) {
            return true;
          }

          return false;
        };

        // Store original console methods
        const origError = console.error.bind(console);
        const origWarn = console.warn.bind(console);

        // Override console.error - check all arguments, including Error objects
        console.error = function () {
          try {
            // Check all arguments for the error message
            for (let i = 0; i < arguments.length; i++) {
              const arg = arguments[i];
              if (arg && shouldSuppress(arg)) {
                return; // Suppress this error
              }
              // Also check Error object's message property
              if (arg && typeof arg === 'object' && arg.message && shouldSuppress(arg.message)) {
                return; // Suppress this error
              }
              // Check toString() representation
              if (arg && shouldSuppress(String(arg))) {
                return; // Suppress this error
              }
            }
            origError.apply(console, arguments);
          } catch (e) {
            origError.apply(console, arguments);
          }
        };

        // Override console.warn as well (some browsers log errors as warnings)
        console.warn = function () {
          try {
            for (let i = 0; i < arguments.length; i++) {
              const arg = arguments[i];
              if (arg && shouldSuppress(arg)) {
                return;
              }
              if (arg && typeof arg === 'object' && arg.message && shouldSuppress(arg.message)) {
                return;
              }
              if (arg && shouldSuppress(String(arg))) {
                return;
              }
            }
            origWarn.apply(console, arguments);
          } catch (e) {
            origWarn.apply(console, arguments);
          }
        };

        // Catch errors thrown from scripts via window.onerror
        const origOnError = window.onerror;
        window.onerror = function (message, source, lineno, colno, error) {
          try {
            if (message && shouldSuppress(String(message))) {
              return true; // Suppress the error
            }
            if (error && error.message && shouldSuppress(error.message)) {
              return true; // Suppress the error
            }
            if (error && error.toString && shouldSuppress(error.toString())) {
              return true; // Suppress the error
            }
            // Call original handler if it exists
            if (origOnError) {
              return origOnError.apply(window, arguments);
            }
          } catch (e) {
            if (origOnError) {
              return origOnError.apply(window, arguments);
            }
          }
          return false;
        };

        // Also catch unhandled promise rejections
        const origUnhandledRejection = window.onunhandledrejection;
        window.onunhandledrejection = function (event) {
          try {
            const reason = event.reason;
            if (reason && shouldSuppress(String(reason))) {
              event.preventDefault();
              return false;
            }
            if (reason && reason.message && shouldSuppress(reason.message)) {
              event.preventDefault();
              return false;
            }
            if (reason && reason.toString && shouldSuppress(reason.toString())) {
              event.preventDefault();
              return false;
            }
            if (origUnhandledRejection) {
              return origUnhandledRejection.call(window, event);
            }
          } catch (e) {
            if (origUnhandledRejection) {
              return origUnhandledRejection.call(window, event);
            }
          }
        };

        // Also use addEventListener for error events (catches more error types)
        window.addEventListener('error', function(event) {
          try {
            if (event.message && shouldSuppress(String(event.message))) {
              event.preventDefault();
              event.stopPropagation();
              return false;
            }
            if (event.error && event.error.message && shouldSuppress(event.error.message)) {
              event.preventDefault();
              event.stopPropagation();
              return false;
            }
            if (event.error && event.error.toString && shouldSuppress(event.error.toString())) {
              event.preventDefault();
              event.stopPropagation();
              return false;
            }
          } catch (e) {
            // Ignore errors in error handler
          }
        }, true); // Use capture phase to catch early

        // Also listen for unhandled promise rejections via addEventListener
        window.addEventListener('unhandledrejection', function(event) {
          try {
            const reason = event.reason;
            if (reason && shouldSuppress(String(reason))) {
              event.preventDefault();
              return false;
            }
            if (reason && reason.message && shouldSuppress(reason.message)) {
              event.preventDefault();
              return false;
            }
            if (reason && reason.toString && shouldSuppress(reason.toString())) {
              event.preventDefault();
              return false;
            }
          } catch (e) {
            // Ignore errors in error handler
          }
        });
      })();
    </script>

    <!-- ✅ Add Razorpay checkout script -->
    <script 
      src="https://checkout.razorpay.com/v1/checkout.js"
      onerror="console.error('Failed to load Razorpay SDK')"
      onload="console.log('Razorpay SDK loaded successfully')"
    ></script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
